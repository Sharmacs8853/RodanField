<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Special Offer On Skin Care |Rodan + Field</title>
    <link rel="stylesheet" href="css/cart.css" />
    <script
      src="https://kit.fontawesome.com/24c494a6b6.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div id="overviewcart">
      <div id="cartHead">
        <span><i class="fa-solid fa-bag-shopping"></i></span>
        <span>Your Bag</span>
        <span> <i class="fa-solid fa-xmark" id="cross"></i></span>
      </div>
      <hr />
      <div id="cartItem"></div>
      <p id="info" class="inf">
        Savings, shipping costs and tax calculated at checkout
      </p>
      <div id="cartBottom">
        <div id="total">
          <span>SUBTOTAL</span>
          <span id="amt"></span>
        </div>
        <button id="check">REVIEW BAG & CHECKOUT</button>
      </div>
    </div>
  </body>
</html>

<script>
  var cartData = JSON.parse(localStorage.getItem("cart"));
  console.log(cartData);
  
  var total = cartData.reduce(function (sum, elem, index, arr) {
   
   // console.log(elem.price.slice(1));
    return sum+=Number(elem.price.slice(1));
   // sum = sum + parseInt(elem.price);
  //  if(isNaN(sum)) return sum+(+elem.price.slice(1));
   // return sum;
  },0)
  document.querySelector("#amt").innerHTML = '$'+total;
  
  localStorage.setItem("cartTotalVal", JSON.stringify(total));
  
  cartData.map(function (elem, index) {
    var box = document.createElement("div");
    box.setAttribute("id", "cartdiv");

    var img = document.createElement("img");
    img.src = elem.image;
    img.setAttribute("id", "cartImg");

    var name = document.createElement("p");
    name.textContent = elem.name;
    name.setAttribute("id", "cartName");

    var price = document.createElement("p");
    price.innerText = elem.price;
    price.setAttribute("id", "cartprice");
    // var btn = document.createElement("button");
    // btn.innerText = "Remove";
    // btn.addEventListener("click", function () {
    //   removeItem(elem, index);
    // });
    var h = document.createElement("hr");
    box.append(img, name, price);

    document.querySelector("#cartItem").append(box);
  });
  document.querySelector("#cross").addEventListener("click", cancleFunction);
  function cancleFunction(){
    document.querySelector("#overviewcart").innerHTML = "";
    window.location.href="index.html";
  }
  document.querySelector("#check").addEventListener("click", checkFunction);
  function checkFunction(){
    window.location.href="PaymentPage.html";
  }
 
</script>
